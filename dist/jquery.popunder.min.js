/*! jquery-plugin to create popunders in major browsers., 0.2.32 https://github.com/hpbuniat/jquery-popunder
Copyright (c) 2015 Hans-Peter Buniat, BSD license https://github.com/hpbuniat/jquery-popunder/blob/master/LICENSE*/
!function(a,b,c,d,e){"use strict";a.popunder=function(c,d,e,f){var g=a.popunder.helper,h="undefined";if(0===arguments.length&&(c=b.aPopunder),e||d)g.bindEvents(c,d,e);else if(c="function"==typeof c?c(f):c,(g.ua.ie===!0||g.ua.g===!0)&&(c=g.handleTargetBlank(c,f)),g.reset(),typeof c!==h){do g.queue(c,f);while(c.length>0);g.queue(c,f)}return a},a.popunder.helper={_top:b.self,lastWin:null,lastTarget:null,f:!1,last:!1,b:"about:blank",o:null,du:"__jqpu",ua:{ie:!!/msie|trident/i.test(d.userAgent),oldIE:!!/msie/i.test(d.userAgent),ff:!!/firefox/i.test(d.userAgent),o:!!/opera/i.test(d.userAgent),g:!!/chrome/i.test(d.userAgent),w:!!/webkit/i.test(d.userAgent),fl:!!d.mimeTypes["application/x-shockwave-flash"]},m:{g:"tab"},hs:[],ns:"jqpu",overlayElement:[],overlaySource:[],def:{window:{toolbar:0,scrollbars:1,location:1,statusbar:1,menubar:0,resizable:1,width:(c.availWidth-122).toString(),height:(c.availHeight-122).toString(),screenX:0,screenY:0,left:0,top:0},name:"__pu",cookie:"__puc",blocktime:!1,chromeExclude:"chrome/(4[1-9]|[5-9][d]).",skip:{opera:!0,linux:!0,android:!0,iphone:!0,ipad:!0},cb:null,fs:!1,popup:!1},setMethod:function(a,b){var c=this;return c.m[a]=b,c},uaTest:function(a){return!!new RegExp(a,"i").test(d.userAgent.toString())},queue:function(a,b){var c=!1,d=this;if(a.length>0)for(;c===!1;){var e=a.shift();c=e?d.open(e[0],e[1]||{},a.length,b):!0}else d.last===!1?(d.last=!0,d.bg().href(!0)):d.f||d.ua.g||d.ua.ie||d.bg();return d},handler:function(a,b){"function"==typeof this.hs[a]&&(this.hs[a](b||this.overlaySource[a]),this.overlaySource[a]&&(this.overlayElement[a].css({top:-1,left:-1,visibility:"hidden"}),this.overlayElement[a]=this.overlaySource[a]=null))},bindEvents:function(b,c,d){var e=this,f="string",g=e.hs.length,h=function(a){return function(b){e.handler(a,b)}}(g);return e.hs[g]=function(b){return function(c){return c&&!c.target&&(c={target:e.getTrigger(c)}),a.popunder(b,!1,!1,c),!0}}(b),c&&!e.ua.g&&(c=typeof c===f?a(c):c,c.on("submit."+e.ns,h)),d&&(d=typeof d===f?a(d):d,e.ua.g?(e.def.skip[e.def.chromeExclude]=!0,e.def.fs&&e.ua.fl&&e.overlay(d,g)):d.on("click."+e.ns,h)),e},overlay:function(b,c){return this.createOverlay(c),b.on("mousedown."+this.ns,a.proxy(function(a){1==a.which&&a.target==a.currentTarget&&this.t.overlayElement[this.hs]&&(this.t.overlayElement[this.hs].css({top:a.pageY,left:a.pageX,visibility:"visible"}),this.t.overlaySource[this.hs]=a)},{t:this,hs:c})),this},createOverlay:function(b){if(!this.overlayElement[b]){var c=a('<object type="application/x-shockwave-flash" data="'+this.def.fs+'" />').css(a.extend(!0,{},{position:"absolute",top:-1,left:-1,width:1,height:1,visibility:"hidden",zIndex:2147483647}));c.append('<param name="wmode" value="transparent" />'),c.append('<param name="menu" value="false" />'),c.append('<param name="allowScriptAccess" value="always" />'),c.append('<param name="flashvars" value="'+a.param({hs:b})+'" />'),this.overlayElement[b]=c.appendTo("body")}},loadfl:function(){var b=this,c=a("div.jq-pu object");return b.setMethod("g","overlay"),c.css("zIndex","auto"),b.def.skip[b.def.chromeExclude]=!1,b},cookieCheck:function(b,c){var d=this,e=d.rand(c.cookie,!1),f=a.cookie(e),g=!1;return f?-1===f.indexOf(b)?f+=b:g=!0:f=b,a.cookie(e,f,{expires:new Date((new Date).getTime()+6e4*c.blocktime)}),g},rand:function(a,b){var c=this,d=a?a:c.du;return d+(b===!1?"":Math.floor(89999999*Math.random()+1e7).toString()).replace(".","")},open:function(c,d,e){var f,g,h,i=this,j="function";if(g=a.extend(!0,{},i.def,d),h=g.skip,i.o=c,top!==b.self)try{top.document.location.toString()&&(i._top=top)}catch(k){}for(f in h)if(h.hasOwnProperty(f)&&h[f]===!0&&i.uaTest(f))return!1;return g.blocktime&&typeof a.cookie===j&&i.cookieCheck(c,g)?!1:(c!==i.du&&(i.lastTarget=c,i.ua.g===!0&&"tab"===i.m.g?i.switcher.tab(i,i.o):i.lastWin=i._top.window.open(i.o,i.rand(g.name,!d.name),i.getOptions(g.window))||i.lastWin,i.ua.ff===!0&&i.bg(),i.href(e),typeof g.cb===j&&g.cb(i.lastWin)),!0)},bg:function(a){var b=this;return b.lastWin&&b.lastTarget&&!a?b.ua.ie===!0?b.switcher.simple(b):b.ua.g||b.switcher.pop(b):"oc"===a&&b.switcher.pop(b),b},switcher:{simple:function(a){try{a.lastWin.blur()}catch(c){}b.focus()},pop:function(a){!function(b){try{a.f=b.window.open("about:blank"),a.f&&a.f.close()}catch(c){}try{b.opener.window.focus()}catch(c){}}(a.lastWin)},tab:function(c,d){var f=d?d:"data:text/html,<script>window.close();</script>;",g=!d,h=a("<a/>",{href:f}).appendTo(e.body),i=e.createEvent("MouseEvents");return g="tab"===c.m.g?!g:g,i.initMouseEvent("click",!0,!0,b,0,0,0,0,0,g,!1,!g,g,0,null),h[0].dispatchEvent(i),h[0].parentNode.removeChild(h[0]),c}},href:function(a){var b,c=this;return a&&c.lastTarget&&c.lastWin&&c.lastTarget!==c.b&&c.lastTarget!==c.o&&(c.ua.g===!0&&"simple"!==c.m.g?(b=c.lastWin.document,b.open(),b.write("<html><head><title>"+e.title+'</title><script type="text/javascript">window.location="'+c.lastTarget+'";</script></head><body></body></html>'),b.close()):c.lastWin.document.location.href=c.lastTarget),c},handleTargetBlank:function(b,c){if(c&&"undefined"!=typeof c.target){var d,e=this,f=null,g=a(c.target);g.is('input[type="submit"]')===!0&&(f=c.target.form),f&&"_blank"===f.target&&(d=e.du,e.ua.ie&&(d=f.action+"/?"+a(f).serialize()),b.unshift([d,{popup:!0}]))}return b},reset:function(){var a=this;return a.f=a.last=!1,a.lastTarget=a.lastWin=null,a},unbind:function(c,d){var e=this,f="string";return e.reset(),c=typeof c===f?a(c):c,c.off("submit."+e.ns),d=typeof d===f?a(d):d,d.off("click."+e.ns).next(".jq-pu object").remove().unwrap(),b.aPopunder=[],e},getOptions:function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b+"="+a[b]);return c.join(",")}}}(jQuery,window,screen,navigator,document);